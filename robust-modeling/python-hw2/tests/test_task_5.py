import string
from solutions.task_5 import StringMinus


def test_StringMinus():
    assert str(StringMinus("qwertyerty") - StringMinus("ttttr")) == "qweyery"

    A, B = StringMinus(list(range(5, 15))), StringMinus(list(range(8, 17)))
    assert A - B == "7, "
    assert B - A == "11"

    S, T = StringMinus(list(range(15, 27))), StringMinus(tuple(range(20, 55, 3)))
    assert S - T == "[111112226]"
    assert T - S == "(333444053)"
    assert S * 2 - T * 3 == "[111][11111126]"
    assert S[2:-2] - T[6:-6] == "11101222, 2, 2"
    assert S.replace(",", ";") - T == "[;1;1;1;1;;1;;;2;2;26]"
    assert (
        S.replace(StringMinus(","), StringMinus("-=-")) - T
        == "[-=-1-=-1-=-1-=-1-=--=-1-=--=--=-2-=-2-=-26]"
    )
    assert T.count(S[-6]) == 3
    assert T[3:5] in S

    S = StringMinus("NOTE: gravity is a myth, the Earth sucks.")
    assert S - string.ascii_lowercase == "NOTE:  i a yt, th Earth ss."
    assert (
        string.digits + S - string.ascii_uppercase
        == "0123456789: gravity is a myth, the Earth sucks."
    )

    S = StringMinus("NOTE: gravity is a myth, the Earth sucks.")
    attrs = ["isprintable", "upper", "title", "swapcase", "capitalize", "isascii"]
    res = [
        True,
        "NOTE: GRAVITY IS A MYTH, THE EARTH SUCKS.",
        "Note: Gravity Is A Myth, The Earth Sucks.",
        "note: GRAVITY IS A MYTH, THE eARTH SUCKS.",
        "Note: gravity is a myth, the earth sucks.",
        True,
    ]
    for i in range(len(attrs)):
        assert getattr(S, attrs[i])() == res[i]

    S = StringMinus
    assert "guilty" in S("Suspicion always haunts the guilty mind.")
    assert S("guilty") in S("Suspicion always haunts the guilty mind.")
    assert S("Suspicion").center(20, ".") - "pipi..." == "..Suscon......"
    assert S("__subclasshook__").strip("_") - "ice bus" == "lasshook"
    assert S("__subclasshook__").endswith("hook__")

    N = 1000
    S1 = StringMinus("_".join(f"({x:04x}):" for x in range(N)))
    S2 = StringMinus(
        "_" * (N - 3)
        + "():" * (N - 2)
        + "0" * (N * 5 // 4)
        + "123" * (N * 10 // 45)
        + string.digits * (N // 8)
        + string.ascii_lowercase * (N // 5)
    )
    assert (
        S1 - S2
        == "111112222212111121111111111111221222222222222222121212121212121212121245678933330031032033034035_(036):_(037):"
    )

    N = 10000
    S1 = StringMinus("_".join(f"({x:04x}):" for x in range(N)))
    S2 = StringMinus(
        "_" * (N - 3)
        + "():" * (N - 2)
        + "0" * (N * 5 // 4)
        + "123" * (N * 10 // 45)
        + string.digits * (N // 8)
        + string.ascii_lowercase * (N // 5)
    )
    assert (
        S1 - S2
        == "456456444444454644444444455555455565555555556666646566666666666456456456456456456456747576777777777777777475767777777777456745674567456744444445464744444444555554555657555555556666646566676666666677777475767717171717171717171111114151617111111111111114151617111111111111114151617111111111111114151617111111111111114151861871881818181818181818181181818418518618718818181818181818181811818184185186187188181818181818181818118181841851861871881818181818181811111141516171811111111111111111141151161171181111111111111111111141516171811111111111114151617181111111141411414144145146147148141414141414141515115151541551561571581515151515151516161161616416516616716816161616161616171711717174175176177178171717171717171818118181841851861871881818181818181811111141516171811111111111114151617198199191919191919191911919194195196197198199191919191919191911919194195196197198199191919191919191911919194195196197198199191919191919191911919194195196197198199191919191919191911919194195196197198199191919191919111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111111111141151161171181191111111111111111114151617181911111111111141516171819111111141411414144145146147148149141414141414151511515154155156157158159151515151515161611616164165166167168169161616161616171711717174175176177178179171717171717181811818184185186187188189181818181818191911919194195196197198199191919191919111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111145678911111141516171819111111145678914567894414444454647484944444455155545556575859555555661666465666768696666667717774757677787977777788188848586878889888888991999495969798999999991456789145678914567891456789145678914567891111114151617181911111111111111111411511611711811911111111111111111141516171819111111111111415161718191111111414114141441451461471481491414141414141515115151541551561571581591515151515151616116161641651661671681691616161616161717117171741751761771781791717171717171818118181841851861871881891818181818181919119191941951961971981991919191919191111114151617181911111111111141516171819111111111111415161718191111111111114151617181911111111111141516171819111111111111415161718191111111456789111111415161718191111111456789145678944144444546474849444444551555455565758595555556616664656667686966666677177747576777879777777881888485868788898888889919994959697989999999914567891456789145678914567891456789145678914567891111114151617181911111114567891456789441444445464748494444445515554555657585955555566166646566676869666666771777475767778797777778818884858687888988888899199949596979899999999145678914567891456789145678914567891456789441444445464748494444444141141414144154164174184194141414141414414444454647484944444444144444546474849444444444414444444445446447448449444444444444454514545454455456457458459454545454545464614646464465466467468469464646464646474714747474475476477478479474747474747484814848484485486487488489484848484848494914949494495496497498499494949494949441444445464748494444444414444454647484944444444144444546474849444444441444445464748494444444414444454647484944444444144444546474849444444551555455565758595555555151151515145155165175185195151515151515515554555657585955555555155545556575859555555545415454544545546547548549545454545454555515555554555556557558559555555555555565615656564565566567568569565656565656575715757574575576577578579575757575757585815858584585586587588589585858585858595915959594595596597598599595959595959551555455565758595555555515554555657585955555555155545556575859555555551522525425525625725825925252525252525251252252542552562572582592525252525252525125225254255256257258259252525252525262612622626426526626726826926262626262626126112612261261426152616261726182619261261261261261261262262126222622624262526262627262826292622622622622622622626126226264265266267268269262626262626264264126422642644264526462647264826492642642642642642642652651265226526542655265626572658265926526526526526526526626612662266266426652666266726682669266266266266266266267267126722672674267526762677267826792672672672672672672682681268226826842685268626872688268926826826826826826826926912692269269426952696269726982699269269269269269269262612622626426526626726826926262626262626261262262642652662672682692626262626262626126226264265266267268269262626262626262612622626426526626726826926262626262626261262262642652662672682692626262626262626126226264265266267268269262626262626272712722727427527627727827927272727_(27):_(27):"
    )
